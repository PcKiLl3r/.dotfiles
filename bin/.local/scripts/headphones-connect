#!/usr/bin/env bash

# find the MAC for any device named â€œWH-1000XM6â€
MAC=$(bluetoothctl devices | awk '/WH-1000XM6/ {print $2}')

if [ -z "$MAC" ]; then
  echo "âŒ Could not find WHâ€‘1000XM6. Make sure it's in pairing/trusted list."
  exit 1
fi

# choose action based on first argument
if [[ "$1" == "off" ]]; then
  ACTION="disconnect"
  MSG="Disconnecting"
else
  ACTION="connect"
  MSG="Connecting"
fi

echo "ğŸ”Œ $MSG $MACâ€¦"
bluetoothctl -- "$ACTION" "$MAC"
