#!/usr/bin/env bash

current_dir=$(pwd)
home_dir=$HOME

while [[ "$current_dir" == "$home_dir"* || "$current_dir" == "$home_dir" ]]; do
    if [[ -f "$current_dir/todo.md" ]]; then
        echo "Found todo.md at: $current_dir/todo.md"
        # Try different open commands based on OS
        nvim "$current_dir/todo.md"
        exit 0
    fi

    if [[ "$current_dir" == "/" ]]; then
        break
    fi

    current_dir=$(dirname "$current_dir")
done

echo "No todo.md found in path from current directory to home directory"
exit 1
